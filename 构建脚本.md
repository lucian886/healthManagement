# æ„å»ºè„šæœ¬é€ŸæŸ¥

## ğŸ”¨ æœ¬åœ°æ„å»ºå‘½ä»¤

### å‰ç«¯æ„å»º

```bash
cd /Users/liuzixuan/healthManagement/frontend

# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡æˆ–ä¾èµ–æ›´æ–°æ—¶ï¼‰
npm install

# ç”Ÿäº§æ„å»º
npm run build

# æ„å»ºå®Œæˆåï¼Œäº§ç‰©åœ¨ï¼šfrontend/dist/
```

### åç«¯æ„å»º

```bash
cd /Users/liuzixuan/healthManagement/backend

# Maven æ„å»ºï¼ˆè·³è¿‡æµ‹è¯•ï¼‰
./mvnw clean package -DskipTests

# æˆ–ä½¿ç”¨å…¨å±€ Maven
mvn clean package -DskipTests

# æ„å»ºå®Œæˆåï¼Œjar åŒ…åœ¨ï¼š
# backend/target/health-management-0.0.1-SNAPSHOT.jar
```

---

## ğŸ“¤ ä¸Šä¼ åˆ°æœåŠ¡å™¨

### ä¸Šä¼ å‰ç«¯

```bash
# æ–¹å¼ä¸€ï¼šç›´æ¥ä¸Šä¼  dist æ–‡ä»¶å¤¹
cd /Users/liuzixuan/healthManagement/frontend
scp -r dist root@æœåŠ¡å™¨IP:/opt/health-management/frontend/

# æ–¹å¼äºŒï¼šå…ˆæ‰“åŒ…å†ä¸Šä¼ ï¼ˆæ¨èï¼Œæ›´å¿«ï¼‰
cd /Users/liuzixuan/healthManagement/frontend
tar -czf dist.tar.gz dist/
scp dist.tar.gz root@æœåŠ¡å™¨IP:/opt/health-management/frontend/

# åœ¨æœåŠ¡å™¨ä¸Šè§£å‹
ssh root@æœåŠ¡å™¨IP
cd /opt/health-management/frontend
tar -xzf dist.tar.gz
```

### ä¸Šä¼ åç«¯

```bash
cd /Users/liuzixuan/healthManagement/backend

# ä¸Šä¼  jar åŒ…
scp target/health-management-0.0.1-SNAPSHOT.jar \
    root@æœåŠ¡å™¨IP:/opt/health-management/backend/

# å¦‚æœé…ç½®æ–‡ä»¶æœ‰æ›´æ–°ï¼Œä¹Ÿä¸Šä¼ 
scp src/main/resources/application-prod.yml \
    root@æœåŠ¡å™¨IP:/opt/health-management/backend/
```

### ä¸Šä¼  AI æœåŠ¡ï¼ˆé¦–æ¬¡éƒ¨ç½²ï¼‰

```bash
cd /Users/liuzixuan/healthManagement/ai-service

# æ‰“åŒ…æ•´ä¸ªç›®å½•
tar -czf ai-service.tar.gz *.py requirements.txt

# ä¸Šä¼ 
scp ai-service.tar.gz root@æœåŠ¡å™¨IP:/opt/health-management/

# åœ¨æœåŠ¡å™¨ä¸Šè§£å‹
ssh root@æœåŠ¡å™¨IP
cd /opt/health-management
tar -xzf ai-service.tar.gz
```

---

## ğŸš€ æœåŠ¡å™¨ç«¯å¯åŠ¨å‘½ä»¤

### å¯åŠ¨åç«¯

```bash
ssh root@æœåŠ¡å™¨IP
cd /opt/health-management/backend

# åå°å¯åŠ¨
nohup java -jar health-management-0.0.1-SNAPSHOT.jar \
    --spring.profiles.active=prod \
    > backend.log 2>&1 &

# æŸ¥çœ‹æ—¥å¿—
tail -f backend.log

# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep health-management
```

### å¯åŠ¨ AI æœåŠ¡

```bash
ssh root@æœåŠ¡å™¨IP
cd /opt/health-management/ai-service

# è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆè®°å¾—æ”¹æˆä½ çš„å®é™… API Keyï¼‰
export DASHSCOPE_API_KEY="sk-your-api-key"

# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡ï¼‰
pip3 install -r requirements.txt

# åå°å¯åŠ¨
nohup python3 main.py > ai-service.log 2>&1 &

# æŸ¥çœ‹æ—¥å¿—
tail -f ai-service.log

# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep main.py
```

### é…ç½® Nginx

```bash
ssh root@æœåŠ¡å™¨IP

# å¤åˆ¶é…ç½®æ–‡ä»¶
sudo vi /etc/nginx/sites-available/health-management

# ç²˜è´´ nginx/simple-nginx.conf çš„å†…å®¹
# è®°å¾—ä¿®æ”¹ root è·¯å¾„ä¸ºä½ çš„å®é™…è·¯å¾„

# åˆ›å»ºè½¯é“¾æ¥
sudo ln -s /etc/nginx/sites-available/health-management \
           /etc/nginx/sites-enabled/

# åˆ é™¤é»˜è®¤é…ç½®ï¼ˆå¯é€‰ï¼‰
sudo rm /etc/nginx/sites-enabled/default

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡å¯ Nginx
sudo systemctl restart nginx
```

---

## ğŸ”„ æ›´æ–°æµç¨‹

### æ›´æ–°å‰ç«¯

```bash
# 1. æœ¬åœ°é‡æ–°æ„å»º
cd /Users/liuzixuan/healthManagement/frontend
npm run build

# 2. ä¸Šä¼ ï¼ˆä¼šè¦†ç›–ï¼‰
tar -czf dist.tar.gz dist/
scp dist.tar.gz root@æœåŠ¡å™¨IP:/opt/health-management/frontend/

# 3. æœåŠ¡å™¨è§£å‹
ssh root@æœåŠ¡å™¨IP
cd /opt/health-management/frontend
rm -rf dist
tar -xzf dist.tar.gz

# 4. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œåˆ·æ–°å³å¯
```

### æ›´æ–°åç«¯

```bash
# 1. æœ¬åœ°é‡æ–°æ„å»º
cd /Users/liuzixuan/healthManagement/backend
./mvnw clean package -DskipTests

# 2. ä¸Šä¼ 
scp target/health-management-0.0.1-SNAPSHOT.jar \
    root@æœåŠ¡å™¨IP:/opt/health-management/backend/

# 3. æœåŠ¡å™¨é‡å¯åç«¯
ssh root@æœåŠ¡å™¨IP

# åœæ­¢æ—§è¿›ç¨‹
ps aux | grep health-management
kill <è¿›ç¨‹ID>

# å¯åŠ¨æ–°ç‰ˆæœ¬
cd /opt/health-management/backend
nohup java -jar health-management-0.0.1-SNAPSHOT.jar \
    --spring.profiles.active=prod \
    > backend.log 2>&1 &
```

### æ›´æ–° AI æœåŠ¡

```bash
# 1. ä¸Šä¼ æ–°ä»£ç 
cd /Users/liuzixuan/healthManagement/ai-service
scp main.py agent.py tools.py config.py \
    root@æœåŠ¡å™¨IP:/opt/health-management/ai-service/

# 2. æœåŠ¡å™¨é‡å¯
ssh root@æœåŠ¡å™¨IP

# åœæ­¢æ—§è¿›ç¨‹
ps aux | grep "python3 main.py"
kill <è¿›ç¨‹ID>

# å¯åŠ¨æ–°ç‰ˆæœ¬
cd /opt/health-management/ai-service
export DASHSCOPE_API_KEY="sk-your-api-key"
nohup python3 main.py > ai-service.log 2>&1 &
```

---

## ğŸ›‘ åœæ­¢æœåŠ¡

```bash
# åœæ­¢åç«¯
ps aux | grep health-management
kill <åç«¯PID>

# åœæ­¢ AI æœåŠ¡
ps aux | grep "python3 main.py"
kill <AI PID>

# æˆ–è€…ç›´æ¥ä½¿ç”¨ pkill
pkill -f health-management-0.0.1-SNAPSHOT.jar
pkill -f "python3 main.py"
```

---

## ğŸ“ ä¸€é”®è„šæœ¬ï¼ˆæ¨èï¼‰

### æœ¬åœ°æ„å»ºè„šæœ¬ `build.sh`

```bash
#!/bin/bash

echo "ğŸ”¨ å¼€å§‹æ„å»º..."

# æ„å»ºå‰ç«¯
echo "ğŸ“¦ æ„å»ºå‰ç«¯..."
cd frontend
npm run build
tar -czf dist.tar.gz dist/
cd ..

# æ„å»ºåç«¯
echo "ğŸ“¦ æ„å»ºåç«¯..."
cd backend
./mvnw clean package -DskipTests
cd ..

echo "âœ… æ„å»ºå®Œæˆï¼"
echo "å‰ç«¯: frontend/dist.tar.gz"
echo "åç«¯: backend/target/health-management-0.0.1-SNAPSHOT.jar"
```

### æœ¬åœ°ä¸Šä¼ è„šæœ¬ `upload.sh`

```bash
#!/bin/bash

SERVER="root@æœåŠ¡å™¨IP"
REMOTE_DIR="/opt/health-management"

echo "ğŸ“¤ ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨..."

# ä¸Šä¼ å‰ç«¯
echo "ğŸ“¤ ä¸Šä¼ å‰ç«¯..."
scp frontend/dist.tar.gz $SERVER:$REMOTE_DIR/frontend/

# ä¸Šä¼ åç«¯
echo "ğŸ“¤ ä¸Šä¼ åç«¯..."
scp backend/target/health-management-0.0.1-SNAPSHOT.jar \
    $SERVER:$REMOTE_DIR/backend/

echo "âœ… ä¸Šä¼ å®Œæˆï¼"
echo "è¯·ç™»å½•æœåŠ¡å™¨æ‰§è¡Œï¼š"
echo "  cd $REMOTE_DIR/frontend && tar -xzf dist.tar.gz"
echo "  cd $REMOTE_DIR/backend && ./restart-backend.sh"
```

### æœåŠ¡å™¨é‡å¯è„šæœ¬ `restart-backend.sh`

```bash
#!/bin/bash

cd /opt/health-management/backend

# åœæ­¢æ—§è¿›ç¨‹
echo "ğŸ›‘ åœæ­¢æ—§è¿›ç¨‹..."
pkill -f health-management-0.0.1-SNAPSHOT.jar

sleep 2

# å¯åŠ¨æ–°è¿›ç¨‹
echo "ğŸš€ å¯åŠ¨æ–°è¿›ç¨‹..."
nohup java -jar health-management-0.0.1-SNAPSHOT.jar \
    --spring.profiles.active=prod \
    > backend.log 2>&1 &

sleep 3

# æ˜¾ç¤ºçŠ¶æ€
echo "âœ… å¯åŠ¨å®Œæˆï¼"
ps aux | grep health-management | grep -v grep

echo "ğŸ“‹ æŸ¥çœ‹æ—¥å¿—: tail -f backend.log"
```

ä½¿ç”¨æ–¹å¼ï¼š

```bash
# æœ¬åœ°æ‰§è¡Œ
chmod +x build.sh upload.sh
./build.sh && ./upload.sh

# æœåŠ¡å™¨æ‰§è¡Œ
chmod +x restart-backend.sh
./restart-backend.sh
```

---

## ğŸ¯ å®Œæ•´æµç¨‹æ€»ç»“

```bash
# ===== æœ¬åœ°æ“ä½œ =====

# 1. æ„å»ºå‰ç«¯
cd frontend && npm run build

# 2. æ„å»ºåç«¯
cd backend && ./mvnw clean package -DskipTests

# 3. ä¸Šä¼ 
scp -r frontend/dist root@IP:/opt/health-management/frontend/
scp backend/target/*.jar root@IP:/opt/health-management/backend/

# ===== æœåŠ¡å™¨æ“ä½œ =====

# 4. é…ç½® Nginxï¼ˆé¦–æ¬¡ï¼‰
sudo vi /etc/nginx/sites-available/health-management
# ç²˜è´´é…ç½®ï¼Œä¿®æ”¹è·¯å¾„
sudo ln -s /etc/nginx/sites-available/health-management /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx

# 5. å¯åŠ¨åç«¯
cd /opt/health-management/backend
nohup java -jar health-management-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod > backend.log 2>&1 &

# 6. å¯åŠ¨ AI æœåŠ¡
cd /opt/health-management/ai-service
export DASHSCOPE_API_KEY="your-key"
nohup python3 main.py > ai-service.log 2>&1 &

# 7. è®¿é—®
# http://æœåŠ¡å™¨IP
```

---

å®Œæˆï¼ç°åœ¨ä½ æœ‰äº†æœ€ç®€å•çš„æ„å»ºå’Œéƒ¨ç½²æµç¨‹ã€‚




